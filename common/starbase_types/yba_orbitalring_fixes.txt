sorbital_ring = {
	# generic
	potential = {
		is_orbital_ring = yes
	}
	weight_modifier = {
		base = 10
	}
	ai_design = {
		min = {
			base = 0
		}
		modules = {
			orbital_ring_habitation = {
				base = 2
				modifier = {
					factor = 2
					planet = {
						num_free_districts = {
							type = any
							value <= 2
						}
					}
				}
			}
			orbital_ring_shipyard = {
				base = 0.1				# Generally better to use normal starbases for this
			}
			orbital_ring_anchorage = {
				base = 0.1				# Generally better to use normal starbases for this
			}
			orbital_ring_gun_battery = {
				base = 0.25
				modifier = {
					factor = 3
					owner = {
						OR = {
							is_preferred_weapons = weapon_type_energy
							is_preferred_weapons = weapon_type_kinetic
						}
					}
				}
			}
			orbital_ring_missile_battery = {
				base = 0.25
				modifier = {
					factor = 3
					owner = {
						is_preferred_weapons = weapon_type_explosive
					}
				}
			}
			orbital_ring_hangar_bay = {
				base = 0.25
				modifier = {
					factor = 3
					owner = {
						is_preferred_weapons = weapon_type_strike_craft
					}
				}
			}
		}
		# Generic Buildings
		buildings = {
			# Popless production is best production
			nebula_refinery = {
				base = 1
			}
			# Popless production is best production
			hydroponics_bay = {
				base = 1
			}
			# +1 Amenities from Maintenance Drones (machine only)
			ring_maintenance_hub = {
				base = 1
			}
			# +1 Amenities from Synapse Drones
			ring_synapse_hub = {
				base = 1
			}
			# +1 Unity from Administrator, Manager, Priest, and Telepath jobs
			ring_bureaucracy_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_bureau
							has_designation = col_bureau_spiritualist
							has_building = building_sensorium_1
							has_building = building_autochthon_monument
							has_building = building_corporate_monument
							has_building = building_galactic_memorial_1
							has_building = building_simulation_1
							has_building = building_heritage_site
							has_building = building_hypercomms_forum
							has_building = building_galactic_memorial_2
							has_building = building_galactic_memorial_3
							has_building = building_simulation_2
							has_building = building_simulation_3
							has_building = building_corporate_site
							has_building = building_corporate_forum
							has_building = building_sensorium_2
							has_building = building_sensorium_3
							has_building = building_autocurating_vault
							has_building = building_citadel_of_faith
							has_building = building_corporate_vault
							has_building = building_alpha_hub
						}
					}
				}
			}
			# +2 Minerals from miners
			ring_minerals_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_mining
							has_building = building_mineral_purification_plant
							has_building = building_mineral_purification_hub
						}
					}
				}
			}
			# +2 Energy from Technicians
			ring_energy_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_generator
							has_building = building_energy_grid
							has_building = building_energy_nexus
						}
					}
				}
			}
			# +2 Food from Farmers
			ring_food_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_farming
							has_building = building_food_processing_facility
							has_building = building_food_processing_center
						}
					}
				}
			}
			# +1 Consumer Goods & -2 Minerals from Artisians
			ring_consumer_goods_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_industrial
							has_designation = col_factory
							has_building = building_factory_1
							has_building = building_factory_2
							has_building = building_factory_3
							has_designation = col_ecu_industrial
							has_designation = col_ecu_factory
							has_designation = col_mac_factory
						}
					}
				}
			}
			# +1 Alloys & -2 Minerals from Metallurgists
			ring_alloys_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_industrial
							has_designation = col_foundry
							has_building = building_foundry_1
							has_building = building_foundry_2
							has_building = building_foundry_3
							has_designation = col_ecu_industrial
							has_designation = col_ecu_foundry
							has_designation = col_mac_foundry
							has_designation = col_hiv_foundry
						}
					}
				}
			}
			# +5% Trade value, +1 Amenities from Clerks
			ring_trade_hub = {
				base = 1
				modifier = {
					add = 2
					planet = {
						OR = {
							has_designation = col_city
							has_building = building_galactic_stock_exchange
						}
					}
				}
			}
		}
	}
}

# Shipyard
sorbital_shipyard = {
	potential = {
		is_orbital_ring = yes
		has_starbase_module = orbital_ring_shipyard
	}
	weight_modifier = {
		base = 0
		complex_trigger_modifier = {
			# +100 for each shipyard
			trigger = count_starbase_modules
			parameters = {
				type = orbital_ring_shipyard
			}
			mode = add
			mult = 100
		}
		modifier = {
			add = 1000
			owner = {
				is_ai = yes
				NOR = {
					any_owned_megastructure = {
						OR = {
							is_megastructure_type = mega_shipyard_1
							is_megastructure_type = mega_shipyard_2
							is_megastructure_type = mega_shipyard_3
							is_megastructure_type = mega_shipyard_restored
						}
					}
					any_owned_starbase = {
						has_starbase_module = shipyard
						has_starbase_module = orbital_ring_shipyard
					}
				}
			}
		}
	}
	ai_design = {
		min = {
			base = 0
		}
		# token followed by priority
		buildings = {
			crew_quarters = {
				base = 1
			}
			fleet_academy = {
				base = 1
			}
			# Popless production is best production
			nebula_refinery = {
				base = 1
			}
			# Popless production is best production
			hydroponics_bay = {
				base = 1
			}
			# +1 Amenities from Maintenance Drones (machine only)
			ring_maintenance_hub = {
				base = 1
			}
			# +1 Amenities from Synapse Drones
			ring_synapse_hub = {
				base = 1
			}
			# +1 Unity from Administrator, Manager, Priest, and Telepath jobs
			ring_bureaucracy_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_bureau
							has_designation = col_bureau_spiritualist
							has_building = building_sensorium_1
							has_building = building_autochthon_monument
							has_building = building_corporate_monument
							has_building = building_galactic_memorial_1
							has_building = building_simulation_1
							has_building = building_heritage_site
							has_building = building_hypercomms_forum
							has_building = building_galactic_memorial_2
							has_building = building_galactic_memorial_3
							has_building = building_simulation_2
							has_building = building_simulation_3
							has_building = building_corporate_site
							has_building = building_corporate_forum
							has_building = building_sensorium_2
							has_building = building_sensorium_3
							has_building = building_autocurating_vault
							has_building = building_citadel_of_faith
							has_building = building_corporate_vault
							has_building = building_alpha_hub
						}
					}
				}
			}
			# +2 Minerals from miners
			ring_minerals_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_mining
							has_building = building_mineral_purification_plant
							has_building = building_mineral_purification_hub
						}
					}
				}
			}
			# +2 Energy from Technicians
			ring_energy_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_generator
							has_building = building_energy_grid
							has_building = building_energy_nexus
						}
					}
				}
			}
			# +2 Food from Farmers
			ring_food_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_farming
							has_building = building_food_processing_facility
							has_building = building_food_processing_center
						}
					}
				}
			}
			# +1 Consumer Goods & -2 Minerals from Artisians
			ring_consumer_goods_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_industrial
							has_designation = col_factory
							has_building = building_factory_1
							has_building = building_factory_2
							has_building = building_factory_3
							has_designation = col_ecu_industrial
							has_designation = col_ecu_factory
							has_designation = col_mac_factory
						}
					}
				}
			}
			# +1 Alloys & -2 Minerals from Metallurgists
			ring_alloys_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_industrial
							has_designation = col_foundry
							has_building = building_foundry_1
							has_building = building_foundry_2
							has_building = building_foundry_3
							has_designation = col_ecu_industrial
							has_designation = col_ecu_foundry
							has_designation = col_mac_foundry
							has_designation = col_hiv_foundry
						}
					}
				}
			}
			# +5% Trade value, +1 Amenities from Clerks
			ring_trade_hub = {
				base = 1
				modifier = {
					add = 2
					planet = {
						OR = {
							has_designation = col_city
							has_building = building_galactic_stock_exchange
						}
					}
				}
			}
		}
		modules = {
			orbital_ring_shipyard = {
				base = 1
			}
		}
	}
}

# Anchorage
sorbital_anchorage = {
	potential = {
		is_orbital_ring = yes
		has_starbase_module = orbital_ring_anchorage
	}
	weight_modifier = {
		base = 0
		complex_trigger_modifier = {
			# +100 for each anchorage
			trigger = count_starbase_modules
			parameters = {
				type = orbital_ring_anchorage
			}
			mode = add
			mult = 100
		}
	}
	ai_design = {
		min = {
			base = 0
		}
		ratio = {
			base = 0.35
			modifier = {
				add = 0.1
				exists = owner
				owner = {
					is_militarist = yes
				}
			}
		}
		# token followed by priority
		buildings = {
			naval_logistics_office = {
				base = 10
			}
			defense_grid = {
				base = 0.25
			}
			communications_jammer = {
				base = 0.25
			}
			nebula_refinery = {
				base = 2
			}
			hydroponics_bay = {
				base = 1
			}
		}
		modules = {
			orbital_ring_anchorage = {
				base = 1
			}
			orbital_ring_habitation = {
				base = 0
				modifier = {
					add = 1
					planet = {
						num_free_districts = {
							type = any
							value <= 2
						}
					}
				}
			}
		}
	}
}

# Fortress System
sorbital_fortress = {
	potential = {
		is_orbital_ring = yes
		OR = {
			has_starbase_module = orbital_ring_gun_battery
			has_starbase_module = orbital_ring_missile_battery
			has_starbase_module = orbital_ring_hangar_bay
		}
	}
	ai_use_defense_platforms = yes	#AI will not build defense platforms otherwise, except in the capital system
	weight_modifier = {
		base = 0
		complex_trigger_modifier = {
			# +75 for each gun_battery
			trigger = count_starbase_modules
			parameters = {
				type = orbital_ring_gun_battery
			}
			mode = add
			mult = 75
		}
		complex_trigger_modifier = {
			# +75 for each missile_battery
			trigger = count_starbase_modules
			parameters = {
				type = orbital_ring_missile_battery
			}
			mode = add
			mult = 75
		}
		complex_trigger_modifier = {
			# +75 for each hangar_bay
			trigger = count_starbase_modules
			parameters = {
				type = orbital_ring_hangar_bay
			}
			mode = add
			mult = 75
		}
	}
	ai_design = {
		min = {
			base = 0
		}
		ratio = {
			base = 0.25
			modifier = {
				add = 0.15
				exists = owner
				owner = {
					is_militarist = yes
				}
			}
		}
		# token followed by priority
		buildings = {
			target_uplink_computer = {
				base = 2
			}
			command_center = {
				base = 2
			}
			defense_grid = {
				base = 1
			}
			communications_jammer = {
				base = 0.9
			}
			disruption_field = {
				base = 0.9
			}
		}
		modules = {
			orbital_ring_hangar_bay = {
				base = 1
				modifier = {
					factor = 3
					owner = {
						is_preferred_weapons = weapon_type_strike_craft
					}
				}
			}
			orbital_ring_missile_battery = {
				base = 1
				modifier = {
					factor = 3
					owner = {
						is_preferred_weapons = weapon_type_explosive
					}
				}
			}
			orbital_ring_gun_battery = {
				base = 1
				modifier = {
					factor = 3
					owner = {
						OR = {
							is_preferred_weapons = weapon_type_energy
							is_preferred_weapons = weapon_type_kinetic
						}
					}
				}
			}
		}
	}
}

# Habitation Ring
sorbital_habitation = {
	potential = {
		is_orbital_ring = yes
		has_starbase_module = orbital_ring_habitation
	}
	weight_modifier = {
		base = 0
		complex_trigger_modifier = {
			# +75 for each habitation module
			trigger = count_starbase_modules
			parameters = {
				type = orbital_ring_habitation
			}
			mode = add
			mult = 75
		}
	}
	ai_design = {
		min = {
			base = 1
		}
		ratio = {
			base = 0.5
			modifier = {
				add = 0.25
				exists = owner
				owner = {
					is_pacifist = yes
				}
			}
		}
		# token followed by priority
		buildings = {
			ring_maintenance_hub = {
				base = 1
			}
			# +1 Amenities from Synapse Drones
			ring_synapse_hub = {
				base = 1
			}
			# +1 Unity from Administrator, Manager, Priest, and Telepath jobs
			ring_bureaucracy_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_bureau
							has_designation = col_bureau_spiritualist
							has_building = building_sensorium_1
							has_building = building_autochthon_monument
							has_building = building_corporate_monument
							has_building = building_galactic_memorial_1
							has_building = building_simulation_1
							has_building = building_heritage_site
							has_building = building_hypercomms_forum
							has_building = building_galactic_memorial_2
							has_building = building_galactic_memorial_3
							has_building = building_simulation_2
							has_building = building_simulation_3
							has_building = building_corporate_site
							has_building = building_corporate_forum
							has_building = building_sensorium_2
							has_building = building_sensorium_3
							has_building = building_autocurating_vault
							has_building = building_citadel_of_faith
							has_building = building_corporate_vault
							has_building = building_alpha_hub
						}
					}
				}
			}
			# +2 Minerals from miners
			ring_minerals_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_mining
							has_building = building_mineral_purification_plant
							has_building = building_mineral_purification_hub
						}
					}
				}
			}
			# +2 Energy from Technicians
			ring_energy_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_generator
							has_building = building_energy_grid
							has_building = building_energy_nexus
						}
					}
				}
			}
			# +2 Food from Farmers
			ring_food_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_farming
							has_building = building_food_processing_facility
							has_building = building_food_processing_center
						}
					}
				}
			}
			# +1 Consumer Goods & -2 Minerals from Artisians
			ring_consumer_goods_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_industrial
							has_designation = col_factory
							has_building = building_factory_1
							has_building = building_factory_2
							has_building = building_factory_3
							has_designation = col_ecu_industrial
							has_designation = col_ecu_factory
							has_designation = col_mac_factory
						}
					}
				}
			}
			# +1 Alloys & -2 Minerals from Metallurgists
			ring_alloys_hub = {
				base = 0
				modifier = {
					add = 3
					planet = {
						OR = {
							has_designation = col_industrial
							has_designation = col_foundry
							has_building = building_foundry_1
							has_building = building_foundry_2
							has_building = building_foundry_3
							has_designation = col_ecu_industrial
							has_designation = col_ecu_foundry
							has_designation = col_mac_foundry
							has_designation = col_hiv_foundry
						}
					}
				}
			}
			# +5% Trade value, +1 Amenities from Clerks
			ring_trade_hub = {
				base = 1
				modifier = {
					add = 2
					planet = {
						OR = {
							has_designation = col_city
							has_building = building_galactic_stock_exchange
						}
					}
				}
			}
		}
		modules = {
			orbital_ring_habitation = {
				base = 1
			}
		}
	}
}
